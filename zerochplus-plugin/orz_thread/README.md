# 0ch_orz_thread.pl
ぜろちゃんねるプラス0.7.4以降専用プラグイン - 1専用スレッド


## 無保証宣言
- このプラグインには既知のバグがあります。直す気はありません。
- このプラグインおよび説明文書等に対してサポートは提供しません。
- この説明文書の使い方、技術解説等の記述は参考情報です。批判的にお読みになりやがってください。
- この宣言は他の配布物に対して影響を及ぼしません。この宣言は念のために書いているだけです。「このプラグインだけ特別にサポートが提供されないのであるから、すなわち他の配布物にはサポートが提供される」ということではありません。他のプラグインにも等しくサポートを提供しません。
- この電磁的記録は、人の電子計算機における実行に用する目的では供していません。一方で、この電磁的記録を電子計算機において実行することを禁じもしませんが、その際は、自身の意図に沿うべき動作をするように、適宜修正を行った上で実行してください。


## ライセンス・派生元のソフトウェアについて
このプラグインは、「[0ch_maxres.pl](https://ja.osdn.net/projects/zerochplus/scm/svn/blobs/544/codes/0ch_maxres.pl)」をベースに、「[0ch_ownercmd.pl](https://ja.osdn.net/projects/zerochplus/scm/svn/blobs/544/codes/0ch_ownercmd.pl)」のコードを取り込んで作成しています。
その他、
https://ja.osdn.net/projects/zerochplus/scm/svn/tree/544/codes/
にて公開されているプラグイン、並びに[ぜろちゃんねるプラス0.7.4本体](https://ja.osdn.net/projects/zerochplus/releases/59833)を適宜参考にし、極力コーディングの統一を図っています。

ライセンスは、リポジトリ共通のライセンスとします。
リポジトリ直下の「LICENSE」ファイルをご覧ください。


## バグについて
https://twitter.com/yokeruhari/status/1038403530464194561
> というかRegulation(注)で確定する前のSys->KEY使っちゃうのってヤバいんじゃね？これ直さなきゃいかんわ。

注: (vara.plの)IsRegulationの誤記。

と言いつつ、結局なおしてません。もうやる気ないです。
まあどうせ滅多に起きることじゃないですよ。たぶん^^;

もし直すのであれば、下記を参考にしてください。

https://twitter.com/yokeruhari/status/1038399013869907968

0ch_orz_thread.plに応用するならば…

- `「$isowner」を$Sys->Setしておいて、「if ($isowner)」のブロックを$type==16で実行する`
- `残りは$type==1 or 2(の両方)で実行する`
- `baggins.plに関する処理を適切に切り出し、$type判定の外に持ってくる必要がある`

これらを行えば良いでしょう。

…と書いてはみましたが、あまり書いた意味がなかった気がします。
改造するならば、結局はソースをよく読み、しっかり理解する能力が要求されます。このプラグインは比較的複雑であるため、下手に触ると火傷します^^;


## プラグインの使い方

### インストール編
1. plugin/ディレクトリに放り込みます
2. test/info/errmsg.cgiに下記の1行を追加します(文言は適宜修正してください)
   `1062<>&gt;&gt;1専用スレッド<>>>1さん以外書き込みできないスレッドです^^;`
3. admin.cgiにて「1専用スレッド」を有効化します

### 書き込み編

#### >>1専用スレッドを作る
*スレ立て時にトリップを使用している*ことが条件です。
メール欄に…

- 「!orz」で>>1専用スレッドに
- 「!syaki-n」で元通りの誰でも書き込めるスレッドに

任意のタイミングで変更できます。

このスレッドには…

- \>>1と同じトリップ
- システム共通権限キャップ

を使用している人が書き込むことができます。

#### システム共通権限キャップ専用スレッドを作る
*システム共通権限キャップを使用する*ことが条件です。当たり前か^^;

後のことは「>>1専用スレッドを作る」と同様です。

ただし、>>1と同じトリップを使用しても書き込むことはできません。
あくまでシステム共通権限キャップしか書き込めなくなります。当たり前か^^;
