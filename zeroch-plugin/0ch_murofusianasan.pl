#============================================================================================================
#
#	拡張機能 - ハンマー投げゲーム機能つけてみました。
#	0ch_murofusianasan.pl
#	by 出来杉2.0 ★
#	---------------------------------------------------------------------------
#	http://www.bbs2ch.net/test/read.cgi/operate/1209134476/388
#	388 ：418 (I'm a teapot) ■：2008/06/15(日) 17:24:44.71 ID:/6U1S8RE0
#	    (ry
#	    ・砲丸投げ
#	    http://ansitu.xrea.jp/guidance/?fusianasan
#	    これｗｗｗｗｗ実際に搭載したら面白そう
#	    書き込み削除機能はいいとして潜在能力判定機とか今晩のメニュー機能とか
#	    料金表示機能とか搭載したら今夜は何を食べようか迷わないという
#	---------------------------------------------------------------------------
#	2008.06.15 start
#
#============================================================================================================
package ZPL_murofusianasan;

#------------------------------------------------------------------------------------------------------------
#
#	コンストラクタ
#	-------------------------------------------------------------------------------------
#	@param	なし
#	@return	オブジェクト
#
#------------------------------------------------------------------------------------------------------------
sub new
{
	my $this = shift;
	my $obj={};
	bless($obj,$this);
	return $obj;
}

#------------------------------------------------------------------------------------------------------------
#
#	拡張機能名称取得
#	-------------------------------------------------------------------------------------
#	@param	なし
#	@return	名称文字列
#
#------------------------------------------------------------------------------------------------------------
sub getName
{
	my	$this = shift;
	return 'ハンマー投げゲーム機能\つけてみました。';
}

#------------------------------------------------------------------------------------------------------------
#
#	拡張機能説明取得
#	-------------------------------------------------------------------------------------
#	@param	なし
#	@return	説明文字列
#
#------------------------------------------------------------------------------------------------------------
sub getExplanation
{
	my	$this = shift;
	return '名前の欄に『murofusianasan』(ry';
}

#------------------------------------------------------------------------------------------------------------
#
#	拡張機能タイプ取得
#	-------------------------------------------------------------------------------------
#	@param	なし
#	@return	拡張機能タイプ(スレ立て:1,レス:2,read:4,index:8)
#
#------------------------------------------------------------------------------------------------------------
sub getType
{
	my	$this = shift;
	return (1 | 2);
}

#------------------------------------------------------------------------------------------------------------
#
#	拡張機能実行インタフェイス
#	-------------------------------------------------------------------------------------
#	@param	$sys	MELKOR
#	@param	$form	SAMWISE
#	@return	正常終了の場合は0
#
#------------------------------------------------------------------------------------------------------------
sub execute
{
	my $this = shift;
	my ($sys,$form) = @_;
	
	my $from = $form->Get('FROM');
	
	return 0 if (index($from,'murofusianasan') == -1);
	
	my $meter = int(rand(50));
	
	if ( $meter <= 2 ) {
		$meter = int(rand(13));
		unless ( $meter == 0 ) {
			$meter = int( ($meter+1)/2 );
		}
	}
	elsif ( $meter < 46 ) {
		$meter += 4;
	}
	elsif ( $meter < 49 ) {
		$meter = int(rand(50))+50;
	}
	else {
		$meter = int(rand(51))+100;
	}
	
	$from =~ s#murofusianasan#</b>【$meterｍ】<b>#;
	
	$form->Set('FROM',$from);
	
	return 0;
}

#============================================================================================================
#	Module END
#============================================================================================================
1;
